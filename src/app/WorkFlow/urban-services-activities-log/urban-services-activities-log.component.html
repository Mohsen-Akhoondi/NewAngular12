<div class="main-form-body" style="margin-top: 5px; height:86%;">
  <div class="main-form-body">
    <table style="width: 100%;">
      <tr>
        <td width="33%">
          <span class="table-cell-Lablle">واحد اجرايي</span>
          <app-ng-select-virtual-scroll style="display: inline-block;width: 80%;"
            [NgSelectParams]="NgSelectRegionParams" (selectedChange)="onChangeReigonObj($event)" [Items]="ReigonListSet"
            [multiple]="true">
          </app-ng-select-virtual-scroll>
        </td>
        <td width="33%">
          <table width="100%">
            <tr>
              <td width="50%">
                <span class="table-cell-Lable">انتخاب مناطق 22 گانه</span>
                <app-custom-check-box style="vertical-align: sub;" [isSelected]="Select22Area"
                  [configurationInfo]="CustomCheckBoxConfig"
                  (PrettyCheckBoxChange)="OnChangeCheckBoxValue($event,'Select22َArea')">
                </app-custom-check-box>
              </td>
              <td width="50%">
                <span class="table-cell-Lable">انتخاب همه</span>
                <!--RFC 52080 - درخواست خانم احمدي-->
                <app-custom-check-box style="vertical-align: sub;" [isSelected]="SelectAll"
                  [configurationInfo]="CustomCheckBoxConfig"
                  (PrettyCheckBoxChange)="OnChangeCheckBoxValue($event,'SelectAll')">
                </app-custom-check-box>
              </td>
            </tr>
          </table>
        </td>
        <td width="34%">
          <span class="table-cell-Lablle"> سال مالي قرارداد از</span>
          <app-ng-select-virtual-scroll style="display: inline-block;width: 30%;"
            [NgSelectParams]="NgSelectFromFinYearParams" [Items]="FinYearList"
            (selectedChange)="FromFinYearChanged($event)">
          </app-ng-select-virtual-scroll>
          <span class="table-cell-Lablle">تا</span>
          <app-ng-select-virtual-scroll style="display: inline-block;width: 30%;"
            [NgSelectParams]="NgSelectToFinYearParams" [Items]="FinYearList">
          </app-ng-select-virtual-scroll>
        </td>
      </tr>
      <tr>
        <td width="33%" colspan="2">
          <span class="table-cell-Lablle">فعاليت</span>
          <app-ng-select-virtual-scroll style="display: inline-block;width: 90%;"
            [NgSelectParams]="NgSelecServicesParams" [Items]="ServicesList" [multiple]="true">
          </app-ng-select-virtual-scroll>
        </td>
        <td width="34%">
          <span class="table-cell-Lablle"> تاريخ درخواست از</span>
          <app-jalali-datepicker [WidthPC]="30" [Required]="true" (Change)="OnFromProductRequestDateChange($event)">
          </app-jalali-datepicker>
          <span class="table-cell-Lablle">تا</span>
          <app-jalali-datepicker [WidthPC]="30" [Required]="true" (Change)="OnToProductRequestDateChange($event)">
          </app-jalali-datepicker>
        </td>
      </tr>
      <tr>
        <td width="33%">
          <span class="table-cell-Lablle"> از قرارداد</span>
          <app-ng-select-virtual-scroll style="display: inline-block;width: 80%;"
            [TotalItemCount]="FromContractTotalItemCount" [PageCount]="FromContractPageCount"
            [NgSelectParams]="NgSelectContractParamsFrom" [Items]="ContractListSetFrom"
            (FetchMore)="FetchMoreFromContract($event)" (doSearch)="doFromContractSearch($event)"
            (selectedChange)="FromContractChanged($event)" (Open)="FromContractOpened()">
          </app-ng-select-virtual-scroll>
        </td>
        <td width="33%">
          <span class="table-cell-Lablle">تا</span>
          <app-ng-select-virtual-scroll style="display: inline-block;width: 95%;"
            [TotalItemCount]="ToContractTotalItemCount" [PageCount]="ToContractPageCount"
            [NgSelectParams]="NgSelectContractParamsTo" [Items]="ContractListSetTo"
            (FetchMore)="FetchMoreToContract($event)" (doSearch)="doToContractSearch($event)"
            (Open)="ToContractOpened()">
          </app-ng-select-virtual-scroll>
        </td>
        <td width="34%">
          <span class="table-cell-Lablle"> تاريخ قرارداد از</span>
          <app-jalali-datepicker [WidthPC]="30" [Required]="true" (Change)="OnFromContractDateChange($event)">
          </app-jalali-datepicker>
          <span class="table-cell-Lablle">تا</span>
          <app-jalali-datepicker [WidthPC]="30" [Required]="true" (Change)="OnToContractDateChange($event)">
          </app-jalali-datepicker>
        </td>
      </tr>
      <tr>
        <td width="33%">
          <span class="table-cell-Lable" style="margin-left: 10%;">ماهيت</span>
          <div class="redio-div" style="margin-left: 10%;width:60%">
            <div class="custom-control custom-radio custom-control-inline" style="margin-left: 10%;">
              <input [checked]="IsCost" type="radio" class="custom-control-input" id="ISCostRadio"
                name="ChoosenISCostRadioName" (click)="RedioClick(true)">
              <label style="margin: auto;" class="custom-control-label redio-label" for="ISCostRadio">هزينه
                اي</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline">
              <input [checked]="!IsCost" type="radio" class="custom-control-input" id="ISIncomeRadio"
                name="ChoosenISCostRadioName">
              <label style="margin: auto;" class="custom-control-label redio-label" for="ISIncomeRadio"
                (click)="RedioClick(false)">درآمدي</label>
            </div>
          </div>
        </td>
        <td width="33%">
          <span class="table-cell-Lable">حواله</span>
          <app-custom-check-box style="vertical-align: sub;" [isSelected]="SelectOrder"
            [configurationInfo]="CustomCheckBoxConfig"
            (PrettyCheckBoxChange)="OnChangeCheckBoxValue($event,'SelectOrder')">
          </app-custom-check-box>
        </td>
        <td width="34%">
          <span class="table-cell-Lablle">وضعیت قرارداد</span>
          <app-ng-select-virtual-scroll style="display: inline-block;width: 64.5%;"
            [NgSelectParams]="NgSelectContractStatusParams" [Items]="ContractStatusList">
          </app-ng-select-virtual-scroll>
        </td>
      </tr>
    </table>
  </div>
  <table>
    <tr>
      <td wdith="25%" colspan="2">
        <button type="submit" title="در اين جستجو به ازاي هر قرارداد يک سطر نمايش داده مي شود" (click)="Search()"
          style="width: 150px;height: 30px;" class="select-general-for-lable btn-gray-border btn btn-primary btnGreen">
          <img width="15px" height="15px" src="assets/Icons/Search.png" />
          جستجو به خلاصه
        </button>
        <button title="در اين جستجو به ازاي هر مرحله ي قرارداد يک سطر نمايش داده مي شود" type="submit"
          (click)="partialSearch()" style="width: 150px;height: 30px;"
          class="select-general-for-lable btn-gray-border btn btn-primary btnGreen">
          <img width="15px" height="15px" src="assets/Icons/Search.png" />
          جستجو به ريز
        </button>
      </td>
    </tr>
  </table>
  <div style="clear: both;padding-bottom: 5px; height: 64%;">
    <div class="box-dev" style=" width: 100%;" [style.height.%]="100">
      <app-grid (GridReady)="onGridReady($event)" [columns]="MaincolumnDef" [rowsData]="rowData" [gridHeight]="90"
        (RowClick)="RowClick($event)" (FilterChanged)="OnFilterChanged()" (RowDataChanged)="OnRowDataChanged()"
        (RowDataUpdated)="OnRowDataUpdated()">
      </app-grid>
    </div>
    <div class="main-form-body" style=" margin-top: 2px;color: red;height: 32px;padding: 3px;">
      <div style="min-width: 100px;font-weight: bold;display: inline-block">
        <span id="sum-final-estimate-amount" class="table-cell-Lable">جمع کل مبلغ درخواست: </span>
        <label for="sum-final-estimate-amount" style="margin:2px"> {{SumFinalAmountStr}} </label>
      </div>
      <div style="min-width: 100px;font-weight: bold;display: inline-block">
        <span id="sum-final-contract-amount" class="table-cell-Lable">جمع کل مبلغ قرارداد: </span>
        <!--RFC 53108-->
        <label for="sum-final-contract-amount" style="margin:2px"> {{SumFinalContractAmountStr}} </label>
      </div>
      <div style="min-width: 100px;font-weight: bold;display: inline-block">
        <span id="sum-final-contract-amount" class="table-cell-Lable">جمع کل مبلغ وصولي: </span>
        <label for="sum-final-contract-amount" style="margin:2px"> {{SumFinalReceiptAmountStr}} </label>
      </div>
    </div>
  </div>

</div>
<div class="buttons-place" style="margin: unset;">
  <button [disabled]="IsDisableShowProductRequest" (click)="BtnShowProductRequest()" class="btn btn-primary btnGreen">
    <img width="15px" height="15px" src="assets/Icons/show.png" />
    مشاهده درخواست معامله
  </button>
  <button *ngIf="IsPrint" id="btnPrint" class="btn btn-primary btnGreen" (click)="Print()">
    <img width="15px" height="15px" src="assets/Icons/print.png" />
    چاپ
  </button>
  <button (click)="closeModal()" id="btn4" class="btn btn-primary btnGreen">
    <img width="15px" height="15px" src="assets/Icons/exit.png" />
    خروج</button>
</div>
<ng-template #IsPostedToClean let-row>
  <img width="16px" height="16px"
    [src]="row.IsPostedToClean ? 'assets/Icons/TrueCheckBox.png':'assets/Icons/uncheck.png'" />
</ng-template>
<app-over-popup *ngIf="btnclicked" [HaveMaxBtn]="HaveMaxBtn" [startLeftPosition]="startLeftPosition"
  [startTopPosition]="startTopPosition" [minHeightPixel]="type === 'message-box' ? '' : MinHeightPixel"
  [PopupType]="type" [HeightPercentWithMaxBtn]="type === 'message-box' ? '' : HeightPercentWithMaxBtn"
  [PopupParam]="type === 'message-box' ? alertMessageParams : paramObj" [HaveHeader]="HaveHeader"
  [PixelWidth]="type === 'message-box'? '' : OverPixelWidth"
  [MainMaxwidthPixel]="type === 'message-box'? '' : OverPixelWidth" (popupclosed)="popupclosed($event)"
  (PopupOutPutParam)="type ==='message-box' ? MessageBoxAction($event) : ''">
</app-over-popup>